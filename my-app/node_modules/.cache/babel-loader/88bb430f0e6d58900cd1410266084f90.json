{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\oscar\\\\Dropbox\\\\Semester 3\\\\Colic Web App\\\\40316282_FINAL\\\\my-app\\\\src\\\\components\\\\LoginDisplay.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { MyContext } from '../contexts/MyContext';\nimport { BrowserRouter as Redirect, Route, Switch } from \"react-router-dom\";\nimport InputForm from './InputForm';\nimport './LoginDisplay.css';\nimport { Link } from 'react-router-dom'; //Functional reference is taken from : https://www.w3jar.com/react-js-php-mysql-db-login-registration-system/\n//Function component to display login form if not logged in, or the prediction form if already logged in.\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginDisplay() {\n  _s();\n\n  //Importing the MyContext.js state values. We are interested in isAuth as we are looking to see if the user is signed in. \n  //MyContext is acting as a parental component. It passes its prop values down to this component. React is one directional meaning that props \n  //cannot be passed back up to the parent.\n  const {\n    rootState\n  } = useContext(MyContext);\n  const {\n    isAuth\n  } = rootState;\n  return /*#__PURE__*/_jsxDEV(Route, {\n    children: isAuth ? /*#__PURE__*/_jsxDEV(InputForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 23\n    }, this) : /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 39\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LoginDisplay, \"xg/+98ouyLEmr2TybQ8BE8HnXro=\");\n\n_c = LoginDisplay;\n; //This is the login form that takes user input\n\nfunction Login() {\n  _s2();\n\n  //Importing the MyContext.js state values. We are interested in loginUser and isLoggedIn.\n  //Login user is a method that sends the userInfo to login.php. If the response is successful a localStorage 'loginToken' is stored.\n  //This 'LoginToken' is then to authenticate API requests to our database.\n  //MyContext is acting as a parental component. It passes its prop values down to this component. React is one directional meaning that props \n  //cannot be passed back up to the parent.\n  const {\n    loginUser,\n    isLoggedIn\n  } = useContext(MyContext); // the initial state of our userInfo. This will change as the user inputs into the form\n\n  const initialState = {\n    userInfo: {\n      email: '',\n      password: ''\n    },\n    errorMsg: '',\n    successMsg: ''\n  };\n  const [state, setState] = useState(initialState); // On change input value (email & password) update the current state of userInfo\n\n  const onChangeValue = e => {\n    setState({ ...state,\n      userInfo: { ...state.userInfo,\n        [e.target.name]: e.target.value\n      }\n    });\n  }; // On Submit Login From - if successful local store a authenticating loginToken. If unsuccessful, return an error message.\n\n\n  const submitForm = async event => {\n    event.preventDefault();\n    const data = await loginUser(state.userInfo);\n\n    if (data.success && data.token) {\n      setState({ ...initialState\n      });\n      localStorage.setItem('loginToken', data.token);\n      await isLoggedIn();\n    } else {\n      setState({ ...state,\n        successMsg: '',\n        errorMsg: data.message\n      });\n    }\n  }; // Show Message on Error or Success\n\n\n  let successMsg = '';\n  let errorMsg = '';\n\n  if (state.errorMsg) {\n    errorMsg = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-msg\",\n      children: state.errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 20\n    }, this);\n  }\n\n  if (state.successMsg) {\n    successMsg = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-msg\",\n      children: state.successMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 22\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"title\",\n        children: \"LOGIN\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"contentL\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        class: \" text-center\",\n        children: \"To Access Application Please Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submitForm,\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"exampleFormControlInput1\",\n            class: \"form-label\",\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            class: \"form-control\",\n            name: \"email\",\n            type: \"email\",\n            required: true,\n            placeholder: \"Enter your email\",\n            value: state.userInfo.email,\n            onChange: onChangeValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"exampleFormControlInput1\",\n            class: \"form-label\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            class: \"form-control\",\n            name: \"password\",\n            type: \"password\",\n            required: true,\n            placeholder: \"Enter your password\",\n            value: state.userInfo.password,\n            onChange: onChangeValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errorMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", successMsg]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          class: \"btn btn-outline-primary form-control\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          type: \"submit\",\n          class: \" topSpace btn btn-outline-primary form-control\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(Login, \"MPoxnNa6HXJQbCGDmHBCmje2klc=\");\n\n_c2 = Login;\nexport default LoginDisplay;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LoginDisplay\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["C:/Users/oscar/Dropbox/Semester 3/Colic Web App/40316282_FINAL/my-app/src/components/LoginDisplay.jsx"],"names":["React","useContext","useState","MyContext","BrowserRouter","Redirect","Route","Switch","InputForm","Link","LoginDisplay","rootState","isAuth","Login","loginUser","isLoggedIn","initialState","userInfo","email","password","errorMsg","successMsg","state","setState","onChangeValue","e","target","name","value","submitForm","event","preventDefault","data","success","token","localStorage","setItem","message"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,aAAa,IAAIC,QAA1B,EAAoCC,KAApC,EAA2CC,MAA3C,QAAyD,kBAAzD;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAO,oBAAP;AACA,SAASC,IAAT,QAAqB,kBAArB,C,CAGA;AAEA;;;;AACA,SAASC,YAAT,GAAwB;AAAA;;AAEpB;AACA;AACA;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAgBV,UAAU,CAACE,SAAD,CAAhC;AACA,QAAM;AAAES,IAAAA;AAAF,MAAaD,SAAnB;AAGA,sBAGI,QAAC,KAAD;AAAA,cAGKC,MAAM,gBAAG,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA,YAAH,gBAAmB,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAH9B;AAAA;AAAA;AAAA;AAAA,UAHJ;AAaH;;GAtBQF,Y;;KAAAA,Y;AAsBR,C,CAGD;;AACA,SAASG,KAAT,GAAiB;AAAA;;AAEb;AACA;AACA;AACA;AACA;AACA,QAAM;AAAGC,IAAAA,SAAH;AAAcC,IAAAA;AAAd,MAA6Bd,UAAU,CAACE,SAAD,CAA7C,CAPa,CASZ;;AACD,QAAMa,YAAY,GAAG;AACjBC,IAAAA,QAAQ,EAAE;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,QAAQ,EAAE;AAFJ,KADO;AAKjBC,IAAAA,QAAQ,EAAE,EALO;AAMjBC,IAAAA,UAAU,EAAE;AANK,GAArB;AASA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBrB,QAAQ,CAACc,YAAD,CAAlC,CAnBa,CAqBZ;;AACD,QAAMQ,aAAa,GAAIC,CAAD,IAAO;AACzBF,IAAAA,QAAQ,CAAC,EACL,GAAGD,KADE;AAELL,MAAAA,QAAQ,EAAE,EACN,GAAGK,KAAK,CAACL,QADH;AAEN,SAACQ,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAASE;AAFpB;AAFL,KAAD,CAAR;AAOH,GARD,CAtBa,CAgCb;;;AACA,QAAMC,UAAU,GAAG,MAAOC,KAAP,IAAiB;AAChCA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAMC,IAAI,GAAG,MAAMlB,SAAS,CAACQ,KAAK,CAACL,QAAP,CAA5B;;AACA,QAAIe,IAAI,CAACC,OAAL,IAAgBD,IAAI,CAACE,KAAzB,EAAgC;AAC5BX,MAAAA,QAAQ,CAAC,EACL,GAAGP;AADE,OAAD,CAAR;AAGAmB,MAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCJ,IAAI,CAACE,KAAxC;AACA,YAAMnB,UAAU,EAAhB;AACH,KAND,MAOK;AACDQ,MAAAA,QAAQ,CAAC,EACL,GAAGD,KADE;AAELD,QAAAA,UAAU,EAAE,EAFP;AAGLD,QAAAA,QAAQ,EAAEY,IAAI,CAACK;AAHV,OAAD,CAAR;AAKH;AACJ,GAjBD,CAjCa,CAoDb;;;AACA,MAAIhB,UAAU,GAAG,EAAjB;AACA,MAAID,QAAQ,GAAG,EAAf;;AACA,MAAIE,KAAK,CAACF,QAAV,EAAoB;AAChBA,IAAAA,QAAQ,gBAAG;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,gBAA4BE,KAAK,CAACF;AAAlC;AAAA;AAAA;AAAA;AAAA,YAAX;AACH;;AACD,MAAIE,KAAK,CAACD,UAAV,EAAsB;AAClBA,IAAAA,UAAU,gBAAG;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,gBAA8BC,KAAK,CAACD;AAApC;AAAA;AAAA;AAAA;AAAA,YAAb;AACH;;AAID,sBAEI;AAAA,4BACI;AAAA,6BACI;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAII;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA,8BACI;AAAG,QAAA,KAAK,EAAC,cAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAM,QAAA,QAAQ,EAAEQ,UAAhB;AAA4B,QAAA,UAAU,MAAtC;AAAA,gCACI;AAAK,UAAA,KAAK,EAAC,MAAX;AAAA,kCAGI;AAAO,YAAA,GAAG,EAAC,0BAAX;AAAsC,YAAA,KAAK,EAAC,YAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII;AAAO,YAAA,KAAK,EAAC,cAAb;AAA4B,YAAA,IAAI,EAAC,OAAjC;AAAyC,YAAA,IAAI,EAAC,OAA9C;AAAsD,YAAA,QAAQ,MAA9D;AAA+D,YAAA,WAAW,EAAC,kBAA3E;AAA8F,YAAA,KAAK,EAAEP,KAAK,CAACL,QAAN,CAAeC,KAApH;AAA2H,YAAA,QAAQ,EAAEM;AAArI;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAOI;AAAK,UAAA,KAAK,EAAC,MAAX;AAAA,kCAGI;AAAO,YAAA,GAAG,EAAC,0BAAX;AAAsC,YAAA,KAAK,EAAC,YAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII;AAAO,YAAA,KAAK,EAAC,cAAb;AAA4B,YAAA,IAAI,EAAC,UAAjC;AAA4C,YAAA,IAAI,EAAC,UAAjD;AAA4D,YAAA,QAAQ,MAApE;AAAqE,YAAA,WAAW,EAAC,qBAAjF;AAAuG,YAAA,KAAK,EAAEF,KAAK,CAACL,QAAN,CAAeE,QAA7H;AAAuI,YAAA,QAAQ,EAAEK;AAAjJ;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPJ,eAcI;AAAA,oBAAIJ;AAAJ;AAAA;AAAA;AAAA;AAAA,gBAdJ,eAgBI;AAAA,0BAAKC,UAAL;AAAA;AAAA;AAAA;AAAA;AAAA,gBAhBJ,eAkBI;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,KAAK,EAAC,sCAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlBJ,eAmBI,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,WAAT;AAAqB,UAAA,IAAI,EAAC,QAA1B;AAAmC,UAAA,KAAK,EAAC,gDAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ;AAuCH;;IAvGQR,K;;MAAAA,K;AAyGT,eAAeH,YAAf","sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport { MyContext } from '../contexts/MyContext'\r\nimport { BrowserRouter as Redirect, Route, Switch } from \"react-router-dom\";\r\nimport InputForm from './InputForm'\r\nimport './LoginDisplay.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n//Functional reference is taken from : https://www.w3jar.com/react-js-php-mysql-db-login-registration-system/\r\n\r\n//Function component to display login form if not logged in, or the prediction form if already logged in.\r\nfunction LoginDisplay() {\r\n\r\n    //Importing the MyContext.js state values. We are interested in isAuth as we are looking to see if the user is signed in. \r\n    //MyContext is acting as a parental component. It passes its prop values down to this component. React is one directional meaning that props \r\n    //cannot be passed back up to the parent.\r\n    const { rootState } = useContext(MyContext);\r\n    const { isAuth } = rootState;\r\n\r\n\r\n    return (\r\n\r\n\r\n        <Route >\r\n\r\n            {/* if the state is Auth = true return input form. If false, show login */}\r\n            {isAuth ? <InputForm /> : <Login />}\r\n\r\n        </Route>\r\n\r\n\r\n    )\r\n\r\n};\r\n\r\n\r\n//This is the login form that takes user input\r\nfunction Login() {\r\n\r\n    //Importing the MyContext.js state values. We are interested in loginUser and isLoggedIn.\r\n    //Login user is a method that sends the userInfo to login.php. If the response is successful a localStorage 'loginToken' is stored.\r\n    //This 'LoginToken' is then to authenticate API requests to our database.\r\n    //MyContext is acting as a parental component. It passes its prop values down to this component. React is one directional meaning that props \r\n    //cannot be passed back up to the parent.\r\n    const {  loginUser, isLoggedIn } = useContext(MyContext);\r\n\r\n     // the initial state of our userInfo. This will change as the user inputs into the form\r\n    const initialState = {\r\n        userInfo: {\r\n            email: '',\r\n            password: '',\r\n        },\r\n        errorMsg: '',\r\n        successMsg: '',\r\n    }\r\n\r\n    const [state, setState] = useState(initialState);\r\n\r\n     // On change input value (email & password) update the current state of userInfo\r\n    const onChangeValue = (e) => {\r\n        setState({\r\n            ...state,\r\n            userInfo: {\r\n                ...state.userInfo,\r\n                [e.target.name]: e.target.value\r\n            }\r\n        });\r\n    }\r\n\r\n    // On Submit Login From - if successful local store a authenticating loginToken. If unsuccessful, return an error message.\r\n    const submitForm = async (event) => {\r\n        event.preventDefault();\r\n        const data = await loginUser(state.userInfo);\r\n        if (data.success && data.token) {\r\n            setState({\r\n                ...initialState,\r\n            });\r\n            localStorage.setItem('loginToken', data.token);\r\n            await isLoggedIn();\r\n        }\r\n        else {\r\n            setState({\r\n                ...state,\r\n                successMsg: '',\r\n                errorMsg: data.message\r\n            });\r\n        }\r\n    }\r\n\r\n    // Show Message on Error or Success\r\n    let successMsg = '';\r\n    let errorMsg = '';\r\n    if (state.errorMsg) {\r\n        errorMsg = <div className=\"error-msg\">{state.errorMsg}</div>;\r\n    }\r\n    if (state.successMsg) {\r\n        successMsg = <div className=\"success-msg\">{state.successMsg}</div>;\r\n    }\r\n\r\n\r\n\r\n    return (\r\n\r\n        <div>\r\n            <div>\r\n                <h1 className=\"title\">LOGIN</h1>\r\n            </div>\r\n            <div class=\"contentL\">\r\n                <p class=\" text-center\">To Access Application Please Login</p>\r\n                <form onSubmit={submitForm} noValidate>\r\n                    <div class=\"mb-3\">\r\n                        {/* input name and value is taken to fill out the \"userInfo\" when the form input select value changes in real time */}\r\n                        {/* used to obtain 'email' */}\r\n                        <label for=\"exampleFormControlInput1\" class=\"form-label\">Email address</label>\r\n                        <input class=\"form-control\" name=\"email\" type=\"email\" required placeholder=\"Enter your email\" value={state.userInfo.email} onChange={onChangeValue} />\r\n                    </div>\r\n                    <div class=\"mb-3\">\r\n                         {/* input name and value is taken to fill out the \"userInfo\" when the form input select value changes in real time */}\r\n                        {/* used to obtain 'password' */}\r\n                        <label for=\"exampleFormControlInput1\" class=\"form-label\">Password</label>\r\n                        <input class=\"form-control\" name=\"password\" type=\"password\" required placeholder=\"Enter your password\" value={state.userInfo.password} onChange={onChangeValue} />\r\n                    </div>\r\n                     {/* errorMsg and successMsg start off as \"\" and do not display. Upon form submission these states change and a message outputs */}\r\n                    <p>{errorMsg}</p>\r\n                    {/* Submit type button triggers the form 'onSubmit={SubmitForm}' submitting the current 'userInfo state to login.php*/}\r\n                    <p> {successMsg}</p>\r\n                    {/* Link that is formatted as a button takes us to the register url directory */}\r\n                    <button type=\"submit\" class=\"btn btn-outline-primary form-control\">Login</button>\r\n                    <Link to=\"/register\" type=\"submit\" class=\" topSpace btn btn-outline-primary form-control\">Register</Link>\r\n\r\n                </form>\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default LoginDisplay;"]},"metadata":{},"sourceType":"module"}